MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[205]: Found directive in column 1. (LIST)
Warning[215]: Processor superseded by command line.  Verify processor symbol.
                      00001 LIST P=PIC18F4321 F=INHX32
                      00002 #include <p18f4321.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Oct 24 2019
                      00005 ;  MPASM PIC18F4321 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2019 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      01455         LIST
                      00003     
Warning[205]: Found directive in column 1. (CONFIG)
                      00004 CONFIG OSC=INTIO2
Warning[205]: Found directive in column 1. (CONFIG)
                      00005 CONFIG PBADEN=DIG
Warning[205]: Found directive in column 1. (CONFIG)
                      00006 CONFIG WDT=OFF
                      00007 
                      00008 ;--------------------------------------
                      00009 ; DEFINIM VARIABLES
                      00010 ;--------------------------------------
                      00011 ; Constants per guardar el valor de velocitat en 7Segments
  00000000            00012 CONST_7SEG_HIGH  EQU  0x00
  00000001            00013 CONST_7SEG_MID   EQU  0x01
  00000002            00014 CONST_7SEG_LOW   EQU  0x02
  00000003            00015 CONST_7SEG_0     EQU  0x03
                      00016 ; Flag per saber si la velocitat és negativa (=1) o positiva (=0)
  00000004            00017 IS_NEGATIVE      EQU  0x04
                      00018 ; Flag per saber si estem a mode manual (=1) o creuer (=0)
  00000005            00019 MANUAL_MODE      EQU  0x05
                      00020 ; Codi vel: 1 --> High Negative
                      00021            ;2 --> Mid Negative
                      00022            ;3 --> Low Negative
                      00023            ;4 --> 0
                      00024            ;5 --> Low Positive
                      00025            ;6 --> Mid Positive
                      00026            ;7 --> High Positive 
  00000006            00027 VEL_ACTUAL       EQU  0x06
                      00028 ; Comptador per filtrar rebots
  00000007            00029 ContInstL        EQU  0x07
  00000008            00030 ContInstH        EQU  0x08 
                      00031 ; Comptador per comptar 1 minut (per inactivitat)
  00000009            00032 TicsMinH         EQU  0x09
  00000010            00033 TicsMinL         EQU  0x10
                      00034 ; Flag per saber si l'alarma està activa (=1) o no (=0)
  00000011            00035 ALARM_EN         EQU  0x11
                      00036 ; Comptador per comptar mig segon (pampallugues de l'alarma)
  00000012            00037 TicsAlarmL       EQU  0x12
  00000013            00038 TicsAlarmH       EQU  0x13
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00039 ; Flag per habilitar el comptatge de temps del polsador RecordMode 
                      00040 ; de 1 segon (=1) o deshabilitar-lo (=0)
  00000014            00041 AUTOP_EN         EQU  0x14
                      00042 ; Comptador per comptar 1 segon (pel polsador recording)
  00000015            00043 TicsSegL         EQU  0x15
  00000016            00044 TicsSegH         EQU  0x16
                      00045 ; Flag per saber si estem en mode recording (=1) o no ho estem (=0)
  00000017            00046 RECORD_MODE      EQU  0x17
                      00047 ; Comptador per comptar periodes de PWM del servo (20ms)
  00000018            00048 Tics20           EQU  0x18
                      00049 ; Codi dir: 1 --> Max Left
                      00050            ;2 --> High Left
                      00051            ;3 --> Mid Left
                      00052            ;4 --> Low Left
                      00053            ;5 --> Straight
                      00054            ;6 --> Low Right
                      00055            ;7 --> Mid Right 
                      00056            ;8 --> High Right
                      00057            ;9 --> Max Right
  00000019            00058 DIR_ACTUAL       EQU  0x19
                      00059 ; Flag per saber si la direccio és esquerra (=1) o dreta (=0)
  00000020            00060 IS_LEFT          EQU  0x20
                      00061 ; Comptador per comptar el THigh del PWM del servo
  00000021            00062 ContTHigh        EQU  0x21
                      00063 ; Comptador per comptar el numero de passos que li toca al PWM
  00000022            00064 ContPWML         EQU  0x22
  00000023            00065 ContPWMH         EQU  0x23
                      00066 ; Comptador per comptar el delay entre save i save de 1ms en 1ms i fins a 1min
  00000024            00067 TicsDelayL       EQU  0x24
  00000025            00068 TicsDelayH       EQU  0x25
                      00069 ; Comptador per comptar el numero de Saves que ha fet per una ruta (max 30)
  00000026            00070 ContSaves        EQU  0x26
                      00071 ; Flag per saber si estem en mode pilot automatic (=1) o no (=0)
  00000027            00072 AUTOP_MODE       EQU  0x27
                      00073 ; Flag per saber si estem fent una espera de delay en el mode automatic 
                      00074 ; (=1) o no (=0)
  00000028            00075 DELAY_ESPERA_EN  EQU  0x28
                      00076 ; Temps de delay que tenim entre un save i un altre
                      00077 ; El delay el treiem del que llegim a la RAM en el mode pilot automatic
  00000029            00078 TIME_DELAY_L     EQU  0x29
  00000030            00079 TIME_DELAY_H     EQU  0x30
                      00080 
Warning[205]: Found directive in column 1. (ORG)
                      00081 ORG 0x0000
Warning[203]: Found opcode in column 1. (GOTO)
000000 EF?? F???      00082 GOTO MAIN
Warning[205]: Found directive in column 1. (ORG)
                      00083 ORG 0x0008
Warning[203]: Found opcode in column 1. (GOTO)
000008 EF?? F???      00084 GOTO HIGH_RSI
Warning[205]: Found directive in column 1. (ORG)
                      00085 ORG 0x0018
Warning[203]: Found opcode in column 1. (RETFIE)
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000018 0011           00086 RETFIE FAST
                      00087 
                      00088 ;--------------------------------------
                      00089 ; FUNCIONS PEL TIMER
                      00090 ;--------------------------------------
                      00091 ; Recarrega el valor del timer per una interrupció cada 1ms
00001A                00092 LOAD_TMR
00001A 0EF0           00093   MOVLW HIGH(.61536)
00001C 6ED7           00094   MOVWF TMR0H,0
00001E 0E60           00095   MOVLW LOW(.61536)
000020 6ED6           00096   MOVWF TMR0L,0  
000022 0012           00097   RETURN
                      00098 
                      00099 ; Reseteja el comptador de 1min   
000024                00100 RESET_TICS_MIN
000024 6A11           00101   CLRF ALARM_EN
000026 6A09           00102   CLRF TicsMinH
000028 6A10           00103   CLRF TicsMinL
00002A 0012           00104   RETURN
                      00105  
00002C                00106 RESET_TICS_DELAY
00002C 6A09           00107   CLRF TicsMinH
00002E 6A10           00108   CLRF TicsMinL
000030 0012           00109   RETURN
                      00110 
                      00111 ; Reseteja el comptador de 1seg   
000032                00112 RESET_TICS_SEG
000032 2A14           00113   INCF AUTOP_EN,1
000034 6A16           00114   CLRF TicsSegH
000036 6A15           00115   CLRF TicsSegL
000038 0012           00116   RETURN
                      00117   
                      00118 ; Reseteja el comptador de 0,5seg   
00003A                00119 RESET_TICS_ALARM
00003A 6A13           00120   CLRF TicsAlarmH
00003C 6A12           00121   CLRF TicsAlarmL
00003E 0012           00122   RETURN
                      00123 
                      00124 ; Gestiona totes les interrupcions (nomes tenim de timer)
000040                00125 HIGH_RSI
000040 A4F2           00126   BTFSS INTCON,TMR0IF,0
000042 0011           00127   RETFIE FAST
000044 94F2           00128   BCF INTCON,TMR0IF,0
000046 EC?? F???      00129   CALL LOAD_TMR
00004A EC?? F???      00130   CALL CHECK_20ms
00004E B028           00131   BTFSC DELAY_ESPERA_EN,0,0
000050 EC?? F???      00132   CALL CHECK_TICS_DELAY_AUTO
000054 B017           00133   BTFSC RECORD_MODE,0,0
000056 EC?? F???      00134   CALL CHECK_TICS_DELAY_REC
00005A B014           00135   BTFSC AUTOP_EN,0
00005C EC?? F???      00136   CALL CHECK_TICS_SEG
000060 A011           00137   BTFSS ALARM_EN,0
000062 EF?? F???      00138   GOTO CHECK_TICS_MIN
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000066 EF?? F???      00139   GOTO MINUTE_PASSED
                      00140 
                      00141 ; Espera el temps de delay que se li ha assignat
00006A                00142 CHECK_TICS_DELAY_AUTO
00006A 2A24           00143   INCF TicsDelayL,1
00006C B0D8           00144   BTFSC STATUS,C,0
00006E 2A25           00145   INCF TicsDelayH,1
000070 5230           00146   MOVF TIME_DELAY_H
000072 5C25           00147   SUBWF TicsDelayH,0
000074 A4D8           00148   BTFSS STATUS,Z,0
000076 0012           00149   RETURN
000078 5229           00150   MOVF TIME_DELAY_L
00007A 5C24           00151   SUBWF TicsDelayL,0
00007C A4D8           00152   BTFSS STATUS,Z,0
00007E 0012           00153   RETURN
                      00154   ; Ha passat el temps de delay aixi que desactivem el enable de espera
000080 6A28           00155   CLRF DELAY_ESPERA_EN
000082 0012           00156   RETURN
                      00157   
                      00158 ; Compta el delay de Save en Save en el mode Record i avisa si ha passat 1min
000084                00159 CHECK_TICS_DELAY_REC
000084 2A24           00160   INCF TicsDelayL,1
000086 B0D8           00161   BTFSC STATUS,C,0
000088 2A25           00162   INCF TicsDelayH,1
00008A 0EEA           00163   MOVLW HIGH(.60000)
00008C 5C25           00164   SUBWF TicsDelayH,0
00008E A4D8           00165   BTFSS STATUS,Z,0
000090 0012           00166   RETURN
000092 0E60           00167   MOVLW LOW(.60000)
000094 5C24           00168   SUBWF TicsDelayL,0
000096 A4D8           00169   BTFSS STATUS,Z,0
000098 0012           00170   RETURN
00009A 6A17           00171   CLRF RECORD_MODE
00009C EC?? F???      00172   CALL RESET_TICS_DELAY
0000A0 0012           00173   RETURN
                      00174 ; Comprova si ha passat 20ms (1 periode de PWM del servo)
0000A2                00175 CHECK_20ms
0000A2 2A18           00176   INCF Tics20,1
0000A4 0E14           00177   MOVLW .20
0000A6 5C18           00178   SUBWF Tics20,0
0000A8 B4D8           00179   BTFSC STATUS,Z,0
0000AA EC?? F???      00180   CALL NEW_SERVO_PWM
0000AE 0012           00181   RETURN
                      00182   
                      00183 ; Posa el temps a 1 que marca la direccio actual 
0000B0                00184 NEW_SERVO_PWM
0000B0 C019 F021      00185   MOVFF DIR_ACTUAL,ContTHigh
                      00186   ; TODO: DEBUGGING
0000B4 8489           00187   BSF LATA,2,0
0000B6 888A           00188   BSF LATB,4,0
0000B8 868A           00189   BSF LATB,3,0
0000BA 8A8A           00190   BSF LATB,5,0
0000BC EC?? F???      00191   CALL POS_INICIAL_SERVO
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000C0 0E01           00192   MOVLW .1
0000C2 5C21           00193   SUBWF ContTHigh,0
0000C4 B4D8           00194   BTFSC STATUS,Z,0
0000C6 EF?? F???      00195   GOTO END_PASSOS
0000CA 0621           00196   DECF ContTHigh,1
Warning[207]: Found label after column 1. (T_PASSOS)
0000CC                00197   T_PASSOS
0000CC EC?? F???      00198     CALL COUNT_PAS_SERVO
0000D0 0621           00199     DECF ContTHigh,1
0000D2 A4D8           00200     BTFSS STATUS,Z,0
0000D4 EF?? F???      00201     GOTO T_PASSOS
Warning[207]: Found label after column 1. (END_PASSOS)
0000D8                00202   END_PASSOS
                      00203   ; TODO: DEBUGGING
0000D8 9489           00204   BCF LATA,2,0
0000DA 988A           00205   BCF LATB,4,0
0000DC 968A           00206   BCF LATB,3,0
0000DE 9A8A           00207   BCF LATB,5,0
0000E0 6A18           00208   CLRF Tics20
0000E2 0012           00209   RETURN
                      00210   
                      00211 ; Comprova si ha passat 1 minut d'inactivitat (60000ms = 1min)
0000E4                00212 CHECK_TICS_MIN
0000E4 B027           00213   BTFSC AUTOP_MODE,0
0000E6 0011           00214   RETFIE FAST
0000E8 2A10           00215   INCF TicsMinL,1
0000EA B0D8           00216   BTFSC STATUS,C,0
0000EC 2A09           00217   INCF TicsMinH,1
0000EE 0EEA           00218   MOVLW HIGH(.60000)
0000F0 5C09           00219   SUBWF TicsMinH,0
0000F2 A4D8           00220   BTFSS STATUS,Z,0
0000F4 0011           00221   RETFIE FAST
0000F6 0E60           00222   MOVLW LOW(.60000)
0000F8 5C10           00223   SUBWF TicsMinL,0
0000FA A4D8           00224   BTFSS STATUS,Z,0
0000FC 0011           00225   RETFIE FAST
                      00226 ; Aqui ha passat 1min
Warning[203]: Found opcode in column 1. (MOVLW)
0000FE 0E01           00227 MOVLW .1
Warning[203]: Found opcode in column 1. (MOVWF)
000100 6E11           00228 MOVWF ALARM_EN
Warning[203]: Found opcode in column 1. (BSF)
000102 8689           00229 BSF LATA,3,0
Warning[203]: Found opcode in column 1. (CALL)
000104 EC?? F???      00230 CALL RESET_TICS_ALARM
                      00231 
                      00232 ; Activa l'alarma fent pampallugues canviant cada 0,5seg el led (500ms = 0,5seg)
000108                00233 MINUTE_PASSED
000108 2A12           00234   INCF TicsAlarmL,1
00010A B0D8           00235   BTFSC STATUS,C,0
00010C 2A13           00236   INCF TicsAlarmH,1
00010E 0E01           00237   MOVLW HIGH(.500)
000110 5C13           00238   SUBWF TicsAlarmH,0
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000112 A4D8           00239   BTFSS STATUS,Z,0
000114 0011           00240   RETFIE FAST
000116 0EF4           00241   MOVLW LOW(.500)
000118 5C12           00242   SUBWF TicsAlarmL,0
00011A A4D8           00243   BTFSS STATUS,Z,0
00011C 0011           00244   RETFIE FAST
00011E 7689           00245   BTG LATA,3,0
000120 EC?? F???      00246   CALL RESET_TICS_ALARM
000124 0011           00247   RETFIE FAST
                      00248 
                      00249 ; Comprova si el polsador Record ha passat 1 segon polsat
000126                00250 CHECK_TICS_SEG
000126 2A15           00251   INCF TicsSegL,1
000128 B0D8           00252   BTFSC STATUS,C,0
00012A 2A16           00253   INCF TicsSegH,1
00012C 0E03           00254   MOVLW HIGH(.1000)
00012E 5C16           00255   SUBWF TicsSegH,0
000130 A4D8           00256   BTFSS STATUS,Z,0
000132 0012           00257   RETURN
000134 0EE8           00258   MOVLW LOW(.1000)
000136 5C15           00259   SUBWF TicsSegL,0
000138 A4D8           00260   BTFSS STATUS,Z,0
00013A 0012           00261   RETURN
                      00262   ; Ha passat 1 segon per tant canviem al mode pilot automatic
00013C A005           00263   BTFSS MANUAL_MODE,0
00013E 0012           00264   RETURN
                      00265   ; Si estem en mode recording, tampoc canviarem a mode pilot automatic
000140 B017           00266   BTFSC RECORD_MODE,0
000142 0012           00267   RETURN
000144 0E01           00268   MOVLW .1
000146 6E27           00269   MOVWF AUTOP_MODE
000148 0012           00270   RETURN
                      00271     
                      00272 ;--------------------------------------
                      00273 ; FUNCIONS PELS POLSADORS (per polling)
                      00274 ;--------------------------------------
                      00275 ; Actualitza el led de velocitat negativa
00014A                00276 UPDATE_SPEED
00014A 0E04           00277   MOVLW .4
00014C 5C06           00278   SUBWF VEL_ACTUAL,0
00014E A8D8           00279   BTFSS STATUS,N,0
000150 9689           00280   BCF LATA,3,0
000152 B8D8           00281   BTFSC STATUS,N,0
000154 8689           00282   BSF LATA,3,0
000156 0012           00283   RETURN
                      00284 
                      00285 ; Canvia el mode a manual
000158                00286 CHANGE_TO_MANUAL
000158 6805           00287   SETF MANUAL_MODE
00015A EC?? F???      00288   CALL RGB_GREEN
00015E EF?? F???      00289   GOTO ESPERA_FI_P0
                      00290 
                      00291 ; Canvia el mode a creuer
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000162                00292 CHANGE_TO_CRUISE
000162 6A05           00293   CLRF MANUAL_MODE
000164 EC?? F???      00294   CALL RGB_BLUE
000168 EF?? F???      00295   GOTO ESPERA_FI_P0  
                      00296 
                      00297 ; Canvia el mode del polsador manual pel corresponent (filtrant rebots)
00016C                00298 CHANGE_MANUAL_MODE
00016C EC?? F???      00299   CALL COUNT_20ms
000170 EC?? F???      00300   CALL RESET_TICS_MIN
000174 A005           00301   BTFSS MANUAL_MODE,0
000176 EF?? F???      00302   GOTO CHANGE_TO_MANUAL
00017A EF?? F???      00303   GOTO CHANGE_TO_CRUISE
Warning[207]: Found label after column 1. (ESPERA_FI_P0)
00017E                00304   ESPERA_FI_P0
00017E A081           00305     BTFSS PORTB,0,0
000180 EF?? F???      00306     GOTO ESPERA_FI_P0
000184 EC?? F???      00307   CALL COUNT_20ms
000188 EC?? F???      00308   CALL UPDATE_SPEED
00018C 0012           00309   RETURN
                      00310 
                      00311 ; Canvia el mode a gravacio
00018E                00312 CHANGE_TO_RECORD
00018E 6817           00313   SETF RECORD_MODE
000190 EC?? F???      00314   CALL NETEJA_RAM
000194 6A26           00315   CLRF ContSaves
000196 EC?? F???      00316   CALL RGB_RED
00019A EF?? F???      00317   GOTO ESPERA_FI_P1
                      00318 
                      00319 ; Canvia el mode a no gravacio
00019E                00320 CHANGE_TO_NO_RECORD
00019E 6A17           00321   CLRF RECORD_MODE
0001A0 EC?? F???      00322   CALL RGB_GREEN
0001A4 EF?? F???      00323   GOTO ESPERA_FI_P1
                      00324   
                      00325 ; Activa i desactiva el mode de gravacio i pilot automatic (filtrant rebots)
0001A8                00326 CHANGE_RECORDING_MODE
0001A8 EC?? F???      00327   CALL COUNT_20ms
0001AC EC?? F???      00328   CALL RESET_TICS_MIN
0001B0 EC?? F???      00329   CALL RESET_TICS_SEG
0001B4 A017           00330   BTFSS RECORD_MODE,0
0001B6 EF?? F???      00331   GOTO CHANGE_TO_RECORD
0001BA EF?? F???      00332   GOTO CHANGE_TO_NO_RECORD
Warning[207]: Found label after column 1. (ESPERA_FI_P1)
0001BE                00333   ESPERA_FI_P1
0001BE A281           00334     BTFSS PORTB,1,0
0001C0 EF?? F???      00335     GOTO ESPERA_FI_P1
0001C4 EC?? F???      00336   CALL COUNT_20ms
0001C8 6A14           00337   CLRF AUTOP_EN
0001CA EC?? F???      00338   CALL UPDATE_SPEED
0001CE 0012           00339   RETURN
                      00340 
                      00341 ; Guarda la velocitat, direccio i delay si estem en el mode record
0001D0                00342 SAVE_PARAMS
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0001D0 EC?? F???      00343   CALL COUNT_20ms
0001D4 A017           00344   BTFSS RECORD_MODE,0
0001D6 EF?? F???      00345   GOTO ESPERA_FI_P2
0001DA 2A26           00346   INCF ContSaves,1
                      00347   ; Guardar velocitat
0001DC C006 FFEE      00348   MOVFF VEL_ACTUAL,POSTINC0
                      00349   ; Guardar direccio
0001E0 C019 FFEE      00350   MOVFF DIR_ACTUAL,POSTINC0
                      00351   ; Guardar delay (primer Low i despres High)
0001E4 C024 FFEE      00352   MOVFF TicsDelayL,POSTINC0
0001E8 C025 FFEE      00353   MOVFF TicsDelayH,POSTINC0
                      00354   ; Reiniciar delay
0001EC EC?? F???      00355   CALL RESET_TICS_DELAY
0001F0 0E1E           00356   MOVLW .30
0001F2 5C26           00357   SUBWF ContSaves,0
0001F4 B4D8           00358   BTFSC STATUS,Z,0
                      00359   ; 30 saves done, so we go back to manual mode
0001F6 6A17           00360   CLRF RECORD_MODE
                      00361   
Warning[207]: Found label after column 1. (ESPERA_FI_P2)
0001F8                00362   ESPERA_FI_P2
0001F8 A481           00363     BTFSS PORTB,2,0
0001FA EF?? F???      00364     GOTO ESPERA_FI_P2
0001FE EC?? F???      00365   CALL COUNT_20ms
000202 0012           00366   RETURN
                      00367 
                      00368 ;--------------------------------------
                      00369 ; FUNCIONS DE CONFIGURACIONS DE LA RAM
                      00370 ;--------------------------------------
                      00371 ; Inicialitza la RAM a la posicio inicial on guardarem els valors 
                      00372 ; dels parametres. Comença a la posicio 0 del Bank 1
000204                00373 INITIAL_POSITION_RAM
                      00374   ; Situem al Bank 1
000204 0E01           00375   MOVLW .1
000206 6EEA           00376   MOVWF FSR0H,0
                      00377   ; Situem a l'adreca 0
000208 6AE9           00378   CLRF FSR0L,0
00020A 0012           00379   RETURN
                      00380   
                      00381 
                      00382 ; Neteja (posa a 0) les 128 primeres adreces del Bank 1
                      00383 ; Ja que com a maxim omplirem 4@ * 30saves = 120@
00020C                00384 NETEJA_RAM
00020C EC?? F???      00385   CALL INITIAL_POSITION_RAM
000210 6A07           00386   CLRF ContInstL
Warning[207]: Found label after column 1. (NETEJA)
000212                00387   NETEJA
000212 2A07           00388     INCF ContInstL,1
000214 6AEE           00389     CLRF POSTINC0,0
000216 A6D8           00390     BTFSS STATUS,OV,0
000218 EF?? F???      00391     GOTO NETEJA
00021C 0012           00392   RETURN
                      00393 
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00394   
                      00395 ;--------------------------------------
                      00396 ; FUNCIONS DE CONFIGURACIONS INICIALS
                      00397 ;--------------------------------------
                      00398 ; Config OSC per tenir F=16MHz
00021E                00399 INIT_OSC
00021E 0E60           00400   MOVLW b'01100000'
000220 6ED3           00401   MOVWF OSCCON,0
000222 8C9B           00402   BSF OSCTUNE,PLLEN,0
000224 0012           00403   RETURN
                      00404 
                      00405 ; Inicialitza ports a utilitzar
000226                00406 INIT_PORTS
000226 8092           00407   BSF TRISA,0,0
000228 8292           00408   BSF TRISA,1,0
00022A 9692           00409   BCF TRISA,3,0
00022C 8093           00410   BSF TRISB,0,0
00022E 8293           00411   BSF TRISB,1,0
000230 8493           00412   BSF TRISB,2,0
000232 9693           00413   BCF TRISB,3,0
000234 9893           00414   BCF TRISB,4,0
000236 9A93           00415   BCF TRISB,5,0
000238 9C93           00416   BCF TRISB,6,0
00023A 9E93           00417   BCF TRISB,7,0
00023C 6A94           00418   CLRF TRISC,0
00023E 6A95           00419   CLRF TRISD,0
000240 9096           00420   BCF TRISE,0,0
000242 9296           00421   BCF TRISE,1,0
000244 9496           00422   BCF TRISE,2,0
000246 9EF1           00423   BCF INTCON2,RBPU,0
000248 9892           00424   BCF TRISA,4,0 ;TODO: DEBUGGING
00024A 9492           00425   BCF TRISA,2,0 ;TODO: DEBUGGING
00024C 0012           00426   RETURN
                      00427 
                      00428 ; Inicialitza variables a utilitzar
00024E                00429 INIT_VARS
00024E 0E37           00430   MOVLW b'00110111'
000250 6E00           00431   MOVWF CONST_7SEG_HIGH
000252 0E75           00432   MOVLW b'01110101'
000254 6E01           00433   MOVWF CONST_7SEG_MID
000256 0E0D           00434   MOVLW b'00001101'
000258 6E02           00435   MOVWF CONST_7SEG_LOW
00025A 0E7D           00436   MOVLW b'01111101'
00025C 6E03           00437   MOVWF CONST_7SEG_0
00025E 6805           00438   SETF MANUAL_MODE
000260 9689           00439   BCF LATA,3,0
000262 C003 FF8C      00440   MOVFF CONST_7SEG_0,LATD
000266 EC?? F???      00441   CALL RGB_GREEN
00026A EC?? F???      00442   CALL RESET_TICS_MIN
00026E 0E04           00443   MOVLW .4
000270 6E06           00444   MOVWF VEL_ACTUAL
000272 0E05           00445   MOVLW .5
000274 6E19           00446   MOVWF DIR_ACTUAL
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000276 6A11           00447   CLRF ALARM_EN
000278 6A04           00448   CLRF IS_NEGATIVE
00027A 9889           00449   BCF LATA,4,0 ;TODO: DEBUGGING
00027C 6A14           00450   CLRF AUTOP_EN
00027E 6A17           00451   CLRF RECORD_MODE
000280 6A18           00452   CLRF Tics20
000282 EC?? F???      00453   CALL RESET_TICS_DELAY
000286 6A26           00454   CLRF ContSaves
                      00455   ;BCF LATA,2,0
000288 9A8A           00456   BCF LATB,5,0
00028A 0012           00457   RETURN
                      00458 
                      00459 ; Inicialitza ADC pel joystick (AN0 i AN1)
00028C                00460 INIT_ADC
                      00461   ;Analog OUT (AN0 & AN1) i deshabilita Vref
00028C 0E0D           00462   MOVLW b'00001101'
00028E 6EC1           00463   MOVWF ADCON1,0
                      00464   ;Clear ADCON2
000290 6AC0           00465   CLRF ADCON2,0
                      00466   ;Enable ADC i selecciona Channel 0
000292 0E01           00467   MOVLW b'00000001'
000294 6EC2           00468   MOVWF ADCON0,0
000296 0012           00469   RETURN
                      00470 
                      00471 ; Inicialitza les interrupcions a utilitzar (nomes la del timer)
000298                00472 INIT_IRQS
000298 9ED0           00473   BCF RCON,IPEN,0
00029A 0EC0           00474   MOVLW b'11000000'
00029C 6EF2           00475   MOVWF INTCON,0
00029E 0012           00476   RETURN
                      00477 
                      00478 ; Inicialitza el timer a utilitzar (TIMER0)
0002A0                00479 INIT_TMR
0002A0 0E8F           00480   MOVLW b'10001111'
0002A2 6ED5           00481   MOVWF T0CON,0
0002A4 8AF2           00482   BSF INTCON,TMR0IE,0
0002A6 0012           00483   RETURN
                      00484 
                      00485 ;--------------------------------------
                      00486 ; MAIN I LOOP DEL PROGRAMA
                      00487 ;--------------------------------------
0002A8                00488 MAIN
0002A8 EC?? F???      00489   CALL INIT_OSC
0002AC EC?? F???      00490   CALL INIT_PORTS
0002B0 EC?? F???      00491   CALL INIT_VARS
0002B4 EC?? F???      00492   CALL INIT_ADC
0002B8 EC?? F???      00493   CALL INIT_IRQS
0002BC EC?? F???      00494   CALL INIT_TMR
                      00495   
0002C0                00496 LOOP
                      00497 ; Reprodueix ruta si estem en mode pilot automatic
Warning[203]: Found opcode in column 1. (BTFSC)
0002C0 B027           00498 BTFSC AUTOP_MODE,0
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[203]: Found opcode in column 1. (GOTO)
0002C2 EF?? F???      00499 GOTO REPRODUIR_RUTA
                      00500 ; Consulta Polsador Manual
Warning[203]: Found opcode in column 1. (BTFSS)
0002C6 A081           00501 BTFSS PORTB,0,0 
Warning[203]: Found opcode in column 1. (CALL)
0002C8 EC?? F???      00502 CALL CHANGE_MANUAL_MODE
                      00503 ; Consulta Polsador Recording
Warning[203]: Found opcode in column 1. (BTFSS)
0002CC A281           00504 BTFSS PORTB,1,0
Warning[203]: Found opcode in column 1. (CALL)
0002CE EC?? F???      00505 CALL CHANGE_RECORDING_MODE
                      00506 ; Consulta Polsador Save
Warning[203]: Found opcode in column 1. (BTFSS)
0002D2 A481           00507 BTFSS PORTB,2,0
Warning[203]: Found opcode in column 1. (CALL)
0002D4 EC?? F???      00508 CALL SAVE_PARAMS
                      00509 ; Check direccio
Warning[203]: Found opcode in column 1. (CALL)
0002D8 EC?? F???      00510 CALL TAKE_DIRECTION 
                      00511 ; Check Mode i velocitat si Manual
Warning[203]: Found opcode in column 1. (BTFSS)
0002DC A005           00512 BTFSS MANUAL_MODE,0
Warning[203]: Found opcode in column 1. (GOTO)
0002DE EF?? F???      00513 GOTO LOOP
                      00514 
                      00515 ; Selecciona CH0
Warning[203]: Found opcode in column 1. (BCF)
0002E2 94C2           00516 BCF ADCON0,CHS0,0
Warning[203]: Found opcode in column 1. (CALL)
0002E4 EC?? F???      00517 CALL WAIT_GO_ADC
                      00518 
                      00519 ;Agafa el output (en ADRESH)
                      00520 ;Per utilitzar 7 passos OUTPUT --> ADRESH rang (numero de valors) 
                      00521                         ;H (N) --> [0,38]      (39)
                      00522                         ;M (N) --> [39,77]     (39)
                      00523                         ;L (N) --> [78, 116]   (39)
                      00524                         ;0 --> [117,138]       (22)
                      00525                         ;L (P) --> [139, 177]  (39)
                      00526                         ;M (P) --> [178,216]   (39)
                      00527                         ;H (P) --> [217,255]   (39)
                      00528 ; Divideix in 2 parts per utilitzar el bit Negative de STATUS 
                      00529 ; Sense sobrepassar el limit CA2
Warning[203]: Found opcode in column 1. (MOVLW)
0002E8 0E8B           00530 MOVLW .139
Warning[203]: Found opcode in column 1. (SUBWF)
0002EA 5CC4           00531 SUBWF ADRESH,0,0
Warning[203]: Found opcode in column 1. (BTFSC)
0002EC B8D8           00532 BTFSC STATUS,N,0
Warning[203]: Found opcode in column 1. (GOTO)
0002EE EF?? F???      00533 GOTO CHECK_LOW_VEL
Warning[203]: Found opcode in column 1. (GOTO)
0002F2 EF?? F???      00534 GOTO CHECK_HIGH_VEL
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00535 
                      00536 ; Assigna les velocitats negatives i el 0
0002F6                00537 CHECK_LOW_VEL
0002F6 0E27           00538   MOVLW .39
0002F8 5CC4           00539   SUBWF ADRESH,0,0
0002FA B8D8           00540   BTFSC STATUS,N,0
0002FC EF?? F???      00541   GOTO VEL_N_HIGH
000300 0E4E           00542   MOVLW .78
000302 5CC4           00543   SUBWF ADRESH,0,0
000304 B8D8           00544   BTFSC STATUS,N,0
000306 EF?? F???      00545   GOTO VEL_N_MID
00030A 0E75           00546   MOVLW .117
00030C 5CC4           00547   SUBWF ADRESH,0,0
00030E B8D8           00548   BTFSC STATUS,N,0
000310 EF?? F???      00549   GOTO VEL_N_LOW
000314 EF?? F???      00550   GOTO VEL_0
                      00551 
                      00552 ; Assigna les velocitats positives
000318                00553 CHECK_HIGH_VEL
000318 0EB2           00554   MOVLW .178
00031A 5CC4           00555   SUBWF ADRESH,0,0
00031C B8D8           00556   BTFSC STATUS,N,0
00031E EF?? F???      00557   GOTO VEL_P_LOW
000322 0ED9           00558   MOVLW .217
000324 5CC4           00559   SUBWF ADRESH,0,0
000326 B8D8           00560   BTFSC STATUS,N,0
000328 EF?? F???      00561   GOTO VEL_P_MID
00032C 0EFF           00562   MOVLW .255
00032E 5CC4           00563   SUBWF ADRESH,0,0
000330 B8D8           00564   BTFSC STATUS,N,0
000332 EF?? F???      00565   GOTO VEL_P_HIGH
                      00566 
                      00567 ; Les següents funcions assignen la velocitat, i la posen als 7seg i encenen
                      00568 ; o apaguen el led de velocitat negatiu mentre no estigui l'alarma activada
                      00569 ; Assigna la velocitat (N) H
000336                00570 VEL_N_HIGH
000336 A004           00571   BTFSS IS_NEGATIVE,0
000338 EF?? F???      00572   GOTO VEL_P_HIGH
00033C 0E01           00573   MOVLW .1
00033E 5C06           00574   SUBWF VEL_ACTUAL,0
000340 B4D8           00575   BTFSC STATUS,Z,0
000342 EF?? F???      00576   GOTO LOOP
000346 0E01           00577   MOVLW .1
000348 6E06           00578   MOVWF VEL_ACTUAL
00034A EC?? F???      00579   CALL RESET_TICS_MIN
00034E C000 FF8C      00580   MOVFF CONST_7SEG_HIGH,LATD
000352 A011           00581   BTFSS ALARM_EN,0
000354 8689           00582   BSF LATA,3,0
000356 0E01           00583   MOVLW .1
000358 6E04           00584   MOVWF IS_NEGATIVE
00035A EF?? F???      00585   GOTO LOOP
                      00586 
                      00587 ; Assigna la velocitat (N) M 
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00035E                00588 VEL_N_MID
00035E 0E02           00589   MOVLW .2
000360 5C06           00590   SUBWF VEL_ACTUAL,0
000362 B4D8           00591   BTFSC STATUS,Z,0
000364 EF?? F???      00592   GOTO LOOP
000368 0E02           00593   MOVLW .2
00036A 6E06           00594   MOVWF VEL_ACTUAL
00036C EC?? F???      00595   CALL RESET_TICS_MIN
000370 C001 FF8C      00596   MOVFF CONST_7SEG_MID,LATD
000374 A011           00597   BTFSS ALARM_EN,0
000376 8689           00598   BSF LATA,3,0
000378 0E01           00599   MOVLW .1
00037A 6E04           00600   MOVWF IS_NEGATIVE
00037C EF?? F???      00601   GOTO LOOP
                      00602 
                      00603 ; Assigna la velocitat (N) L
000380                00604 VEL_N_LOW
000380 0E03           00605   MOVLW .3
000382 5C06           00606   SUBWF VEL_ACTUAL,0
000384 B4D8           00607   BTFSC STATUS,Z,0
000386 EF?? F???      00608   GOTO LOOP
00038A 0E03           00609   MOVLW .3
00038C 6E06           00610   MOVWF VEL_ACTUAL
00038E EC?? F???      00611   CALL RESET_TICS_MIN
000392 C002 FF8C      00612   MOVFF CONST_7SEG_LOW,LATD
000396 A011           00613   BTFSS ALARM_EN,0
000398 8689           00614   BSF LATA,3,0
00039A 0E01           00615   MOVLW .1
00039C 6E04           00616   MOVWF IS_NEGATIVE
00039E EF?? F???      00617   GOTO LOOP
                      00618 
                      00619 ; Assigna la velocitat 0
0003A2                00620 VEL_0
0003A2 0E04           00621   MOVLW .4
0003A4 5C06           00622   SUBWF VEL_ACTUAL,0
0003A6 B4D8           00623   BTFSC STATUS,Z,0
0003A8 EF?? F???      00624   GOTO LOOP
0003AC 0E04           00625   MOVLW .4
0003AE 6E06           00626   MOVWF VEL_ACTUAL
0003B0 EC?? F???      00627   CALL RESET_TICS_MIN
0003B4 C003 FF8C      00628   MOVFF CONST_7SEG_0,LATD
0003B8 A011           00629   BTFSS ALARM_EN,0
0003BA 9689           00630   BCF LATA,3,0
0003BC 6A04           00631   CLRF IS_NEGATIVE
0003BE EF?? F???      00632   GOTO LOOP
                      00633 
                      00634 ; Assigna la velocitat (P) L 
0003C2                00635 VEL_P_LOW
0003C2 0E05           00636   MOVLW .5
0003C4 5C06           00637   SUBWF VEL_ACTUAL,0
0003C6 B4D8           00638   BTFSC STATUS,Z,0
0003C8 EF?? F???      00639   GOTO LOOP
0003CC 0E05           00640   MOVLW .5
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0003CE 6E06           00641   MOVWF VEL_ACTUAL
0003D0 EC?? F???      00642   CALL RESET_TICS_MIN
0003D4 C002 FF8C      00643   MOVFF CONST_7SEG_LOW,LATD
0003D8 A011           00644   BTFSS ALARM_EN,0
0003DA 9689           00645   BCF LATA,3,0
0003DC 6A04           00646   CLRF IS_NEGATIVE
0003DE EF?? F???      00647   GOTO LOOP
                      00648 
                      00649 ; Assigna la velocitat (P) M
0003E2                00650 VEL_P_MID
0003E2 0E06           00651   MOVLW .6
0003E4 5C06           00652   SUBWF VEL_ACTUAL,0
0003E6 B4D8           00653   BTFSC STATUS,Z,0
0003E8 EF?? F???      00654   GOTO LOOP
0003EC 0E06           00655   MOVLW .6
0003EE 6E06           00656   MOVWF VEL_ACTUAL
0003F0 EC?? F???      00657   CALL RESET_TICS_MIN
0003F4 C001 FF8C      00658   MOVFF CONST_7SEG_MID,LATD
0003F8 A011           00659   BTFSS ALARM_EN,0
0003FA 9689           00660   BCF LATA,3,0
0003FC 6A04           00661   CLRF IS_NEGATIVE
0003FE EF?? F???      00662   GOTO LOOP
                      00663 
                      00664 ; Assigna la velocitat (P) H
000402                00665 VEL_P_HIGH
000402 0E07           00666   MOVLW .7
000404 5C06           00667   SUBWF VEL_ACTUAL,0
000406 B4D8           00668   BTFSC STATUS,Z,0
000408 EF?? F???      00669   GOTO LOOP
00040C 0E07           00670   MOVLW .7
00040E 6E06           00671   MOVWF VEL_ACTUAL
000410 EC?? F???      00672   CALL RESET_TICS_MIN
000414 C000 FF8C      00673   MOVFF CONST_7SEG_HIGH,LATD
000418 A011           00674   BTFSS ALARM_EN,0
00041A 9689           00675   BCF LATA,3,0
00041C 6A04           00676   CLRF IS_NEGATIVE
00041E EF?? F???      00677   GOTO LOOP
                      00678 
                      00679 ; Assigna la direccio actual
000422                00680 TAKE_DIRECTION
                      00681   ; Selecciona CH1
000422 84C2           00682   BSF ADCON0,CHS0,0
000424 EC?? F???      00683   CALL WAIT_GO_ADC
                      00684   ;Agafa el output (en ADRESH)
                      00685   ;Per utilitzar 9 passos OUTPUT --> ADRESH rang (numero de valors) 
                      00686                         ;MAX (L) --> [0,10]     (11)
                      00687                         ;H (L) --> [11,46]      (36)
                      00688                         ;M (L) --> [47, 82]     (36)
                      00689                         ;L (L) --> [83,118]     (36)
                      00690                         ;S --> [119, 136]       (18)
                      00691                         ;L (R) --> [137,172]    (36)
                      00692                         ;M (R) --> [173,208]    (36)
                      00693                         ;H (R) --> [209,244]    (36)
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00694                         ;MAX (R) --> [245,255]  (11)
                      00695   
                      00696   ; Divideix in 2 parts per utilitzar el bit Negative de STATUS 
                      00697   ; Sense sobrepassar el limit CA2
000428 0E89           00698   MOVLW .137
00042A 5CC4           00699   SUBWF ADRESH,0,0
00042C B8D8           00700   BTFSC STATUS,N,0
00042E EF?? F???      00701   GOTO CHECK_LOW_DIR
000432 EF?? F???      00702   GOTO CHECK_HIGH_DIR
                      00703   
                      00704   ; Assigna les direccions de l'esquerra i el 0
Warning[207]: Found label after column 1. (CHECK_LOW_DIR)
000436                00705   CHECK_LOW_DIR                 
000436 0E0B           00706     MOVLW .11
000438 5CC4           00707     SUBWF ADRESH,0,0
00043A B8D8           00708     BTFSC STATUS,N,0
00043C EF?? F???      00709     GOTO DIR_L_MAX
000440 0E2F           00710     MOVLW .47
000442 5CC4           00711     SUBWF ADRESH,0,0
000444 B8D8           00712     BTFSC STATUS,N,0
000446 EF?? F???      00713     GOTO DIR_L_HIGH
00044A 0E53           00714     MOVLW .83
00044C 5CC4           00715     SUBWF ADRESH,0,0
00044E B8D8           00716     BTFSC STATUS,N,0
000450 EF?? F???      00717     GOTO DIR_L_MID
000454 0E77           00718     MOVLW .119
000456 5CC4           00719     SUBWF ADRESH,0,0
000458 B8D8           00720     BTFSC STATUS,N,0
00045A EF?? F???      00721     GOTO DIR_L_LOW
00045E EF?? F???      00722     GOTO DIR_S
                      00723   
                      00724   ; Assigna les direccions de la dreta
Warning[207]: Found label after column 1. (CHECK_HIGH_DIR)
000462                00725   CHECK_HIGH_DIR
000462 0EAD           00726     MOVLW .173  
000464 5CC4           00727     SUBWF ADRESH,0,0
000466 B8D8           00728     BTFSC STATUS,N,0
000468 EF?? F???      00729     GOTO DIR_R_LOW
00046C 0ED1           00730     MOVLW .209
00046E 5CC4           00731     SUBWF ADRESH,0,0
000470 B8D8           00732     BTFSC STATUS,N,0
000472 EF?? F???      00733     GOTO DIR_R_MID
000476 0EF5           00734     MOVLW .245
000478 5CC4           00735     SUBWF ADRESH,0,0
00047A B8D8           00736     BTFSC STATUS,N,0
00047C EF?? F???      00737     GOTO DIR_R_HIGH
000480 0EFF           00738     MOVLW .255
000482 5CC4           00739     SUBWF ADRESH,0,0
000484 B8D8           00740     BTFSC STATUS,N,0
000486 EF?? F???      00741     GOTO DIR_R_MAX
00048A EF?? F???      00742     GOTO DIR_L_MAX
                      00743   
Warning[207]: Found label after column 1. (GO_BACK)
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00048E                00744   GO_BACK
00048E 0012           00745   RETURN
                      00746   
                      00747 ; Les següents funcions assignen la direccio, i la posen a la barra de leds,
                      00748 ; a mes de mesurar el PWM que haura de tenir el servo
                      00749 ; Assigna la direccio (L) MAX
000490                00750 DIR_L_MAX
000490 A020           00751   BTFSS IS_LEFT,0
000492 EF?? F???      00752   GOTO DIR_R_MAX
000496 0E01           00753   MOVLW .1
000498 5C19           00754   SUBWF DIR_ACTUAL,0
00049A B4D8           00755   BTFSC STATUS,Z,0
00049C EF?? F???      00756   GOTO GO_BACK
0004A0 0E01           00757   MOVLW .1
0004A2 6E19           00758   MOVWF DIR_ACTUAL
0004A4 EC?? F???      00759   CALL RESET_TICS_MIN
                      00760   ; Encenem el valor corresponent a la barra de leds
0004A8 808B           00761   BSF LATC,0,0
0004AA 928B           00762   BCF LATC,1,0
0004AC 0E01           00763   MOVLW .1
0004AE 6E20           00764   MOVWF IS_LEFT
0004B0 EF?? F???      00765   GOTO GO_BACK
                      00766  
                      00767 ; Assigna la direccio (L) HIGH
0004B4                00768 DIR_L_HIGH
0004B4 A020           00769   BTFSS IS_LEFT,0
0004B6 EF?? F???      00770   GOTO DIR_R_MAX
0004BA 0E02           00771   MOVLW .2
0004BC 5C19           00772   SUBWF DIR_ACTUAL,0
0004BE B4D8           00773   BTFSC STATUS,Z,0
0004C0 EF?? F???      00774   GOTO GO_BACK
0004C4 0E02           00775   MOVLW .2
0004C6 6E19           00776   MOVWF DIR_ACTUAL
0004C8 EC?? F???      00777   CALL RESET_TICS_MIN
                      00778   ; Encenem el valor corresponent a la barra de leds
0004CC 908B           00779   BCF LATC,0,0
0004CE 828B           00780   BSF LATC,1,0
0004D0 948B           00781   BCF LATC,2,0
0004D2 0E01           00782   MOVLW .1
0004D4 6E20           00783   MOVWF IS_LEFT
0004D6 EF?? F???      00784   GOTO GO_BACK
                      00785   
                      00786 ; Assigna la direccio (L) MID
0004DA                00787 DIR_L_MID
0004DA 0E03           00788   MOVLW .3
0004DC 5C19           00789   SUBWF DIR_ACTUAL,0
0004DE B4D8           00790   BTFSC STATUS,Z,0
0004E0 EF?? F???      00791   GOTO GO_BACK
0004E4 0E03           00792   MOVLW .3
0004E6 6E19           00793   MOVWF DIR_ACTUAL
0004E8 EC?? F???      00794   CALL RESET_TICS_MIN
                      00795   ; Encenem el valor corresponent a la barra de leds
0004EC 928B           00796   BCF LATC,1,0
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0004EE 848B           00797   BSF LATC,2,0
0004F0 968B           00798   BCF LATC,3,0
0004F2 0E01           00799   MOVLW .1
0004F4 6E20           00800   MOVWF IS_LEFT
0004F6 EF?? F???      00801   GOTO GO_BACK
                      00802   
                      00803 ; Assigna la direccio (L) LOW
0004FA                00804 DIR_L_LOW
0004FA 0E04           00805   MOVLW .4
0004FC 5C19           00806   SUBWF DIR_ACTUAL,0
0004FE B4D8           00807   BTFSC STATUS,Z,0
000500 EF?? F???      00808   GOTO GO_BACK
000504 0E04           00809   MOVLW .4
000506 6E19           00810   MOVWF DIR_ACTUAL
000508 EC?? F???      00811   CALL RESET_TICS_MIN
                      00812   ; Encenem el valor corresponent a la barra de leds
00050C 948B           00813   BCF LATC,2,0
00050E 868B           00814   BSF LATC,3,0
000510 988B           00815   BCF LATC,4,0
000512 9A8B           00816   BCF LATC,5,0
000514 0E01           00817   MOVLW .1
000516 6E20           00818   MOVWF IS_LEFT
000518 EF?? F???      00819   GOTO GO_BACK
                      00820   
                      00821 ; Assigna la direccio Straight (Recte)
00051C                00822 DIR_S
00051C 0E05           00823   MOVLW .5
00051E 5C19           00824   SUBWF DIR_ACTUAL,0
000520 B4D8           00825   BTFSC STATUS,Z,0
000522 EF?? F???      00826   GOTO GO_BACK
000526 0E05           00827   MOVLW .5
000528 6E19           00828   MOVWF DIR_ACTUAL
00052A EC?? F???      00829   CALL RESET_TICS_MIN
                      00830   ; Encenem el valor corresponent a la barra de leds
00052E 968B           00831   BCF LATC,3,0
000530 888B           00832   BSF LATC,4,0
000532 8A8B           00833   BSF LATC,5,0
000534 9C8B           00834   BCF LATC,6,0
000536 6A20           00835   CLRF IS_LEFT
000538 EF?? F???      00836   GOTO GO_BACK
                      00837   
                      00838 ; Assigna la direccio (R) LOW
00053C                00839 DIR_R_LOW
00053C 0E06           00840   MOVLW .6
00053E 5C19           00841   SUBWF DIR_ACTUAL,0
000540 B4D8           00842   BTFSC STATUS,Z,0
000542 EF?? F???      00843   GOTO GO_BACK
000546 0E06           00844   MOVLW .6
000548 6E19           00845   MOVWF DIR_ACTUAL
00054A EC?? F???      00846   CALL RESET_TICS_MIN
                      00847   ; Encenem el valor corresponent a la barra de leds
00054E 988B           00848   BCF LATC,4,0
000550 9A8B           00849   BCF LATC,5,0
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000552 8C8B           00850   BSF LATC,6,0
000554 9E8B           00851   BCF LATC,7,0
000556 6A20           00852   CLRF IS_LEFT
000558 EF?? F???      00853   GOTO GO_BACK
                      00854   
                      00855 ; Assigna la direccio (R) MID
00055C                00856 DIR_R_MID
00055C 0E07           00857   MOVLW .7
00055E 5C19           00858   SUBWF DIR_ACTUAL,0
000560 B4D8           00859   BTFSC STATUS,Z,0
000562 EF?? F???      00860   GOTO GO_BACK
000566 0E07           00861   MOVLW .7
000568 6E19           00862   MOVWF DIR_ACTUAL
00056A EC?? F???      00863   CALL RESET_TICS_MIN
                      00864   ; Encenem el valor corresponent a la barra de leds
00056E 9C8B           00865   BCF LATC,6,0
000570 8E8B           00866   BSF LATC,7,0
000572 968A           00867   BCF LATB,3,0
000574 6A20           00868   CLRF IS_LEFT
000576 EF?? F???      00869   GOTO GO_BACK
                      00870   
                      00871 ; Assigna la direccio (R) HIGH
00057A                00872 DIR_R_HIGH
00057A 0E08           00873   MOVLW .8
00057C 5C19           00874   SUBWF DIR_ACTUAL,0
00057E B4D8           00875   BTFSC STATUS,Z,0
000580 EF?? F???      00876   GOTO GO_BACK
000584 0E08           00877   MOVLW .8
000586 6E19           00878   MOVWF DIR_ACTUAL
000588 EC?? F???      00879   CALL RESET_TICS_MIN
                      00880   ; Encenem el valor corresponent a la barra de leds
00058C 9E8B           00881   BCF LATC,7,0
00058E 868A           00882   BSF LATB,3,0
000590 988A           00883   BCF LATB,4,0
000592 6A20           00884   CLRF IS_LEFT
000594 EF?? F???      00885   GOTO GO_BACK
                      00886   
                      00887 ; Assigna la direccio (R) MAX
000598                00888 DIR_R_MAX
000598 0E09           00889   MOVLW .9
00059A 5C19           00890   SUBWF DIR_ACTUAL,0
00059C B4D8           00891   BTFSC STATUS,Z,0
00059E EF?? F???      00892   GOTO GO_BACK
0005A2 0E09           00893   MOVLW .9
0005A4 6E19           00894   MOVWF DIR_ACTUAL
0005A6 EC?? F???      00895   CALL RESET_TICS_MIN
                      00896   ; Encenem el valor corresponent a la barra de leds
0005AA 968A           00897   BCF LATB,3,0
0005AC 888A           00898   BSF LATB,4,0
0005AE 6A20           00899   CLRF IS_LEFT
0005B0 EF?? F???      00900   GOTO GO_BACK
                      00901 
                      00902   
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00903 ; Treu l'output de ADC quan hagi acabat de fer la transformacio 
0005B4                00904 WAIT_GO_ADC
                      00905   ;Preparat per agafar l'output
0005B4 82C2           00906   BSF ADCON0,GO_NOT_DONE,0
                      00907   ;Procesessa l'output
Warning[207]: Found label after column 1. (WAIT_ADC)
0005B6                00908   WAIT_ADC
0005B6 B2C2           00909     BTFSC ADCON0,GO_NOT_DONE,0
0005B8 EF?? F???      00910     GOTO WAIT_ADC
0005BC 0012           00911   RETURN
                      00912   
                      00913 ; Reprodueix una ruta guardada
0005BE                00914 REPRODUIR_RUTA
0005BE EC?? F???      00915   CALL RGB_WHITE
0005C2 0E00           00916   MOVLW .0
0005C4 5C26           00917   SUBWF ContSaves,0
0005C6 A4D8           00918   BTFSS STATUS,Z,0
0005C8 EF?? F???      00919   GOTO FINAL_RUTA
                      00920   
                      00921   ; Començem a reproduir
0005CC CFEE F006      00922   MOVFF POSTINC0,VEL_ACTUAL
0005D0 CFEE F019      00923   MOVFF POSTINC0,DIR_ACTUAL
0005D4 CFEE F029      00924   MOVFF POSTINC0,TIME_DELAY_L
0005D8 CFEE F030      00925   MOVFF POSTINC0,TIME_DELAY_H
                      00926   ; Cridem a les funcions de direccio i velocitat
0005DC EC?? F???      00927   CALL ASSIGNA_VEL
0005E0 EC?? F???      00928   CALL ASSIGNA_DIR
0005E4 EC?? F???      00929   CALL RESET_TICS_DELAY
0005E8 2A28           00930   INCF DELAY_ESPERA_EN,1
                      00931   ; Ens esperem a que el timer indiqui que ha passat el temps de delay
Warning[207]: Found label after column 1. (ESPERA_DELAY)
0005EA                00932   ESPERA_DELAY
0005EA B028           00933     BTFSC DELAY_ESPERA_EN,0
0005EC EF?? F???      00934     GOTO ESPERA_DELAY
                      00935     
0005F0 0626           00936   DECF ContSaves,1
0005F2 EF?? F???      00937   GOTO REPRODUIR_RUTA
                      00938   
Warning[207]: Found label after column 1. (FINAL_RUTA)
0005F6                00939   FINAL_RUTA
0005F6 6A27           00940   CLRF AUTOP_MODE
0005F8 EC?? F???      00941   CALL RGB_GREEN
0005FC EF?? F???      00942   GOTO LOOP
                      00943   
                      00944 ; Assigna la velocitat que li correspon al 7Seg pel AUTOP_MODE
000600                00945 ASSIGNA_VEL
000600 0E01           00946   MOVLW .1
000602 5C06           00947   SUBWF VEL_ACTUAL,0
000604 B4D8           00948   BTFSC STATUS,Z,0
000606 EC?? F???      00949   CALL POSA_VEL_N_H
00060A 0E02           00950   MOVLW .2
00060C 5C06           00951   SUBWF VEL_ACTUAL,0
00060E B4D8           00952   BTFSC STATUS,Z,0
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000610 EC?? F???      00953   CALL POSA_VEL_N_M
000614 0E03           00954   MOVLW .3
000616 5C06           00955   SUBWF VEL_ACTUAL,0
000618 B4D8           00956   BTFSC STATUS,Z,0
00061A EC?? F???      00957   CALL POSA_VEL_N_L
00061E 0E04           00958   MOVLW .4
000620 5C06           00959   SUBWF VEL_ACTUAL,0
000622 B4D8           00960   BTFSC STATUS,Z,0
000624 C003 FF8C      00961   MOVFF CONST_7SEG_0,LATD
000628 0E05           00962   MOVLW .5
00062A 5C06           00963   SUBWF VEL_ACTUAL,0
00062C B4D8           00964   BTFSC STATUS,Z,0
00062E C002 FF8C      00965   MOVFF CONST_7SEG_LOW,LATD
000632 0E06           00966   MOVLW .6
000634 5C06           00967   SUBWF VEL_ACTUAL,0
000636 B4D8           00968   BTFSC STATUS,Z,0
000638 C001 FF8C      00969   MOVFF CONST_7SEG_MID,LATD
00063C 0E07           00970   MOVLW .7
00063E 5C06           00971   SUBWF VEL_ACTUAL,0
000640 B4D8           00972   BTFSC STATUS,Z,0
000642 C000 FF8C      00973   MOVFF CONST_7SEG_HIGH,LATD
000646 0012           00974   RETURN
                      00975   
                      00976 ; Assigna la velocitat High Negative
000648                00977 POSA_VEL_N_H
000648 C000 FF8C      00978   MOVFF CONST_7SEG_HIGH,LATD
00064C 8689           00979   BSF LATA,3,0
00064E 0012           00980   RETURN
                      00981   
                      00982 ; Assigna la velocitat Mid Negative
000650                00983 POSA_VEL_N_M
000650 C001 FF8C      00984   MOVFF CONST_7SEG_MID,LATD
000654 8689           00985   BSF LATA,3,0
000656 0012           00986   RETURN
                      00987    
                      00988 ; Assigna la velocitat Low Negative
000658                00989 POSA_VEL_N_L
000658 C002 FF8C      00990   MOVFF CONST_7SEG_LOW,LATD
00065C 8689           00991   BSF LATA,3,0
00065E 0012           00992   RETURN
                      00993   
                      00994 ; Assigna la direccio que li correspon a la barra de leds pel AUTOP_MODE
000660                00995 ASSIGNA_DIR
                      00996   ; Netejem els leds
000660 6A8B           00997   CLRF LATC,0
000662 968A           00998   BCF LATB,3,0
000664 988A           00999   BCF LATB,4,0
000666 0E01           01000   MOVLW .1
000668 5C19           01001   SUBWF DIR_ACTUAL,0
00066A B4D8           01002   BTFSC STATUS,Z,0
00066C 808B           01003   BSF LATC,0,0
00066E 0E02           01004   MOVLW .2
000670 5C19           01005   SUBWF DIR_ACTUAL,0
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000672 B4D8           01006   BTFSC STATUS,Z,0
000674 828B           01007   BSF LATC,1,0
000676 0E03           01008   MOVLW .3
000678 5C19           01009   SUBWF DIR_ACTUAL,0
00067A B4D8           01010   BTFSC STATUS,Z,0
00067C 848B           01011   BSF LATC,2,0
00067E 0E04           01012   MOVLW .4
000680 5C19           01013   SUBWF DIR_ACTUAL,0
000682 B4D8           01014   BTFSC STATUS,Z,0
000684 868B           01015   BSF LATC,3,0
000686 0E05           01016   MOVLW .5
000688 5C19           01017   SUBWF DIR_ACTUAL,0
00068A B4D8           01018   BTFSC STATUS,Z,0
00068C EC?? F???      01019   CALL POSA_DIR_0
000690 0E06           01020   MOVLW .6
000692 5C19           01021   SUBWF DIR_ACTUAL,0
000694 B4D8           01022   BTFSC STATUS,Z,0
000696 8C8B           01023   BSF LATC,6,0
000698 0E07           01024   MOVLW .7
00069A 5C19           01025   SUBWF DIR_ACTUAL,0
00069C B4D8           01026   BTFSC STATUS,Z,0
00069E 8E8B           01027   BSF LATC,7,0
0006A0 0E08           01028   MOVLW .8
0006A2 5C19           01029   SUBWF DIR_ACTUAL,0
0006A4 B4D8           01030   BTFSC STATUS,Z,0
0006A6 868A           01031   BSF LATB,3,0
0006A8 0E09           01032   MOVLW .9
0006AA 5C19           01033   SUBWF DIR_ACTUAL,0
0006AC B4D8           01034   BTFSC STATUS,Z,0
0006AE 888A           01035   BSF LATB,4,0
0006B0 0012           01036   RETURN
                      01037   
                      01038 ; Assigna la direccio 0
0006B2                01039 POSA_DIR_0
0006B2 888B           01040   BSF LATC,4,0
0006B4 8A8B           01041   BSF LATC,5,0
0006B6 0012           01042   RETURN
                      01043   
                      01044 ; Color del led RGB vermell pel mode record
0006B8                01045 RGB_RED
0006B8 908D           01046   BCF LATE,0,0
0006BA 928D           01047   BCF LATE,1,0
0006BC 848D           01048   BSF LATE,2,0
0006BE 0012           01049   RETURN
                      01050   
                      01051 ; Color del led RGB verd pel mode manual
0006C0                01052 RGB_GREEN
0006C0 908D           01053   BCF LATE,0,0
0006C2 828D           01054   BSF LATE,1,0
0006C4 948D           01055   BCF LATE,2,0
0006C6 0012           01056   RETURN
                      01057 
                      01058 ; Color del led RGB blau pel mode creuer
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0006C8                01059 RGB_BLUE
0006C8 808D           01060   BSF LATE,0,0
0006CA 928D           01061   BCF LATE,1,0
0006CC 948D           01062   BCF LATE,2,0
0006CE 0012           01063   RETURN
                      01064   
                      01065 ; Color del led RGB blanc pel mode pilot automatic
0006D0                01066 RGB_WHITE
0006D0 808D           01067   BSF LATE,0,0
0006D2 828D           01068   BSF LATE,1,0
0006D4 848D           01069   BSF LATE,2,0
0006D6 0012           01070   RETURN
                      01071 ;--------------------------------------
                      01072 ; COMPTATGES D'INSTRUCCIONS
                      01073 ;--------------------------------------
                      01074 ; Compta 20ms corresponents al temps de rebots dels polsadors 
                      01075 ; TTarget = 20ms | Tinst = 250ns --> #inst = 80.000 - 4 = 79996
                      01076 ; 4 + (4*X + 6)*Y = 79996 --> X = 255 | Y = 78
0006D8                01077 COUNT_20ms
0006D8 0E01           01078   MOVLW .1 ;x = 256 - 255 = 1
0006DA 6E07           01079   MOVWF ContInstL
0006DC 0EB2           01080   MOVLW .178 ;y = 256 - 78 = 178
0006DE 6E08           01081   MOVWF ContInstH
Warning[207]: Found label after column 1. (T_REBOTS)
0006E0                01082   T_REBOTS
0006E0 2A07           01083     INCF ContInstL,1
0006E2 A0D8           01084     BTFSS STATUS,C,0
0006E4 EF?? F???      01085     GOTO T_REBOTS
0006E8 0E01           01086     MOVLW .1
0006EA 6E07           01087     MOVWF ContInstL
0006EC 2A08           01088     INCF ContInstH,1
0006EE A0D8           01089     BTFSS STATUS,C,0
0006F0 EF?? F???      01090     GOTO T_REBOTS
0006F4 0012           01091   RETURN
                      01092   
                      01093 ; Compta 222us corresponents a 1 pas dels 9 que hi ha per mesurar la direccio 
                      01094 ; TTarget = 222us | Tinst = 250ns --> #inst = 888 - 4 = 884
                      01095 ; 2 + 4*X = 884 --> 2 NOP's i X = 220
0006F6                01096 COUNT_PAS_SERVO
0006F6 0E24           01097   MOVLW .36 ;x = 256 - 220 = 36
0006F8 6E22           01098   MOVWF ContPWML
0006FA 0000           01099   NOP
0006FC 0000           01100   NOP
Warning[207]: Found label after column 1. (T_PAS)
0006FE                01101   T_PAS
0006FE 2A22           01102     INCF ContPWML,1
000700 A0D8           01103     BTFSS STATUS,C,0
000702 EF?? F???      01104     GOTO T_PAS  
000706 0012           01105   RETURN
                      01106   
                      01107 ; Compta 0,5ms corresponents a l'estat inicial del servo a 0 graus
                      01108 ; TTarget = 500us | Tinst = 250ns --> #inst = 2000 - 4 = 1996
                      01109 ; 4 + (4*X + 6)*Y = 1996 --> X = 256 | Y = 2
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000708                01110 POS_INICIAL_SERVO
000708 0E00           01111   MOVLW .0 ;x = 256 - 256 = 0
00070A 6E22           01112   MOVWF ContPWML
00070C 0EFE           01113   MOVLW .254 ;y = 256 - 2 = 254
00070E 6E23           01114   MOVWF ContPWMH
Warning[207]: Found label after column 1. (T_INICIAL)
000710                01115   T_INICIAL
000710 2A22           01116     INCF ContPWML,1
000712 A0D8           01117     BTFSS STATUS,C,0
000714 EF?? F???      01118     GOTO T_INICIAL
000718 0E00           01119     MOVLW .0
00071A 6E22           01120     MOVWF ContPWML
00071C 2A23           01121     INCF ContPWMH,1
00071E A0D8           01122     BTFSS STATUS,C,0
000720 EF?? F???      01123     GOTO T_INICIAL
000724 0012           01124   RETURN
                      01125         
Warning[205]: Found directive in column 1. (END)
                      01126 END
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

A                                 00000000
ABDEN                             00000000
ABDOVF                            00000007
ACCESS                            00000000
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ACQT0                             00000003
ACQT1                             00000004
ACQT2                             00000005
ADCON0                            00000FC2
ADCON1                            00000FC1
ADCON2                            00000FC0
ADCS0                             00000000
ADCS1                             00000001
ADCS2                             00000002
ADDEN                             00000003
ADEN                              00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADIP                              00000006
ADMSK1                            00000001
ADMSK2                            00000002
ADMSK3                            00000003
ADMSK4                            00000004
ADMSK5                            00000005
ADON                              00000000
ADRES                             00000FC3
ADRESH                            00000FC4
ADRESL                            00000FC3
ALARM_EN                          00000011
AN0                               00000000
AN1                               00000001
AN10                              00000001
AN11                              00000004
AN12                              00000000
AN2                               00000002
AN3                               00000003
AN4                               00000005
AN5                               00000000
AN6                               00000001
AN7                               00000002
AN8                               00000002
AN9                               00000003
ASSIGNA_DIR                       00000660
ASSIGNA_VEL                       00000600
AUTOP_EN                          00000014
AUTOP_MODE                        00000027
BANKED                            00000001
BAUDCON                           00000FB8
BAUDCTL                           00000FB8
BCLIE                             00000003
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

BCLIF                             00000003
BCLIP                             00000003
BF                                00000000
BGST                              00000005
BOR                               00000000
BRG16                             00000003
BRGH                              00000002
BSR                               00000FE0
C                                 00000000
C1INV                             00000004
C1N                               00000000
C1OUT_CMCON                       00000006
C1OUT_PORTA                       00000004
C1P                               00000003
C2INV                             00000005
C2N                               00000001
C2OUT_CMCON                       00000007
C2OUT_PORTA                       00000005
C2P                               00000002
CCP1                              00000002
CCP1CON                           00000FBD
CCP1IE                            00000002
CCP1IF                            00000002
CCP1IP                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           00000FBA
CCP2IE                            00000000
CCP2IF                            00000000
CCP2IP                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCP2_PORTB                        00000003
CCP2_PORTC                        00000001
CCPR1                             00000FBE
CCPR1H                            00000FBF
CCPR1L                            00000FBE
CCPR2                             00000FBB
CCPR2H                            00000FBC
CCPR2L                            00000FBB
CFGS                              00000006
CHANGE_MANUAL_MODE                0000016C
CHANGE_RECORDING_MODE             000001A8
CHANGE_TO_CRUISE                  00000162
CHANGE_TO_MANUAL                  00000158
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

CHANGE_TO_NO_RECORD               0000019E
CHANGE_TO_RECORD                  0000018E
CHECK_20ms                        000000A2
CHECK_HIGH_DIR                    00000462
CHECK_HIGH_VEL                    00000318
CHECK_LOW_DIR                     00000436
CHECK_LOW_VEL                     000002F6
CHECK_TICS_DELAY_AUTO             0000006A
CHECK_TICS_DELAY_REC              00000084
CHECK_TICS_MIN                    000000E4
CHECK_TICS_SEG                    00000126
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CIS                               00000003
CK                                00000006
CKE                               00000006
CKP                               00000004
CLKI                              00000007
CLKO                              00000006
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             00000FB4
CMIE                              00000006
CMIF                              00000006
CMIP                              00000006
CONST_7SEG_0                      00000003
CONST_7SEG_HIGH                   00000000
CONST_7SEG_LOW                    00000002
CONST_7SEG_MID                    00000001
COUNT_20ms                        000006D8
COUNT_PAS_SERVO                   000006F6
CREN                              00000004
CS                                00000002
CSRC                              00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            00000FB5
CVREF                             00000002
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
CVRSS                             00000004
ContInstH                         00000008
ContInstL                         00000007
ContPWMH                          00000023
ContPWML                          00000022
ContSaves                         00000026
ContTHigh                         00000021
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 27


SYMBOL TABLE
  LABEL                             VALUE 

D                                 00000005
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DDRA                              TRISA
DDRB                              TRISB
DDRC                              TRISC
DDRD                              TRISD
DDRE                              TRISE
DELAY_ESPERA_EN                   00000028
DIR_ACTUAL                        00000019
DIR_L_HIGH                        000004B4
DIR_L_LOW                         000004FA
DIR_L_MAX                         00000490
DIR_L_MID                         000004DA
DIR_R_HIGH                        0000057A
DIR_R_LOW                         0000053C
DIR_R_MAX                         00000598
DIR_R_MID                         0000055C
DIR_S                             0000051C
DONE                              00000001
D_A                               00000005
D_NOT_A                           00000005
ECCP1AS                           00000FB6
ECCP1CON                          00000FBD
ECCP1DEL                          00000FB7
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
EEADR                             00000FA9
EECON1                            00000FA6
EECON2                            00000FA7
EEDATA                            00000FA8
EEIE                              00000004
EEIF                              00000004
EEIP                              00000004
EEPGD                             00000007
END_PASSOS                        000000D8
ESPERA_DELAY                      000005EA
ESPERA_FI_P0                      0000017E
ESPERA_FI_P1                      000001BE
ESPERA_FI_P2                      000001F8
FAST                              00000001
FERR                              00000002
FINAL_RUTA                        000005F6
FLT0                              00000000
FLTS                              00000002
FREE                              00000004
FSR0                              00000000
FSR0H                             00000FEA
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 28


SYMBOL TABLE
  LABEL                             VALUE 

FSR0L                             00000FE9
FSR1                              00000001
FSR1H                             00000FE2
FSR1L                             00000FE1
FSR2                              00000002
FSR2H                             00000FDA
FSR2L                             00000FD9
GCEN                              00000007
GIE                               00000007
GIEH                              00000007
GIEL                              00000006
GIE_GIEH                          00000007
GO                                00000001
GO_BACK                           0000048E
GO_DONE                           00000001
GO_NOT_DONE                       00000001
HIGH_RSI                          00000040
HLVDCON                           00000FD2
HLVDEN                            00000004
HLVDIE                            00000002
HLVDIF                            00000002
HLVDIN                            00000005
HLVDIP                            00000002
HLVDL0                            00000000
HLVDL1                            00000001
HLVDL2                            00000002
HLVDL3                            00000003
IBF                               00000007
IBOV                              00000005
IDLEN                             00000007
INDF0                             00000FEF
INDF1                             00000FE7
INDF2                             00000FDF
INITIAL_POSITION_RAM              00000204
INIT_ADC                          0000028C
INIT_IRQS                         00000298
INIT_OSC                          0000021E
INIT_PORTS                        00000226
INIT_TMR                          000002A0
INIT_VARS                         0000024E
INT0                              00000000
INT0E                             00000004
INT0F                             00000001
INT0IE                            00000004
INT0IF                            00000001
INT1                              00000001
INT1E                             00000003
INT1F                             00000000
INT1IE                            00000003
INT1IF                            00000000
INT1IP                            00000006
INT1P                             00000006
INT2                              00000002
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 29


SYMBOL TABLE
  LABEL                             VALUE 

INT2E                             00000004
INT2F                             00000001
INT2IE                            00000004
INT2IF                            00000001
INT2IP                            00000007
INT2P                             00000007
INTCON                            00000FF2
INTCON2                           00000FF1
INTCON3                           00000FF0
INTEDG0                           00000006
INTEDG1                           00000005
INTEDG2                           00000004
INTSRC                            00000007
IOFS                              00000002
IPEN                              00000007
IPR1                              00000F9F
IPR2                              00000FA2
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRVST                             00000005
IS_LEFT                           00000020
IS_NEGATIVE                       00000004
KBI0                              00000004
KBI1                              00000005
KBI2                              00000006
KBI3                              00000007
LATA                              00000F89
LATA0                             00000000
LATA1                             00000001
LATA2                             00000002
LATA3                             00000003
LATA4                             00000004
LATA5                             00000005
LATA6                             00000006
LATA7                             00000007
LATB                              00000F8A
LATB0                             00000000
LATB1                             00000001
LATB2                             00000002
LATB3                             00000003
LATB4                             00000004
LATB5                             00000005
LATB6                             00000006
LATB7                             00000007
LATC                              00000F8B
LATC0                             00000000
LATC1                             00000001
LATC2                             00000002
LATC3                             00000003
LATC4                             00000004
LATC5                             00000005
LATC6                             00000006
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 30


SYMBOL TABLE
  LABEL                             VALUE 

LATC7                             00000007
LATD                              00000F8C
LATD0                             00000000
LATD1                             00000001
LATD2                             00000002
LATD3                             00000003
LATD4                             00000004
LATD5                             00000005
LATD6                             00000006
LATD7                             00000007
LATE                              00000F8D
LATE0                             00000000
LATE1                             00000001
LATE2                             00000002
LOAD_TMR                          0000001A
LOOP                              000002C0
LVDCON                            00000FD2
LVDEN                             00000004
LVDIE                             00000002
LVDIF                             00000002
LVDIP                             00000002
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
LVDL3                             00000003
LVV0                              00000000
LVV1                              00000001
LVV2                              00000002
LVV3                              00000003
MAIN                              000002A8
MANUAL_MODE                       00000005
MCLR                              00000003
MINUTE_PASSED                     00000108
N                                 00000004
NETEJA                            00000212
NETEJA_RAM                        0000020C
NEW_SERVO_PWM                     000000B0
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BOR                           00000000
NOT_CS                            00000002
NOT_DONE                          00000001
NOT_MCLR                          00000003
NOT_PD                            00000002
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RD                            00000000
NOT_RI                            00000004
NOT_SS                            00000005
NOT_T1SYNC                        00000002
NOT_T3SYNC                        00000002
NOT_TO                            00000003
NOT_W                             00000002
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 31


SYMBOL TABLE
  LABEL                             VALUE 

NOT_WR                            00000001
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OSC1                              00000007
OSC2                              00000006
OSCCON                            00000FD3
OSCFIE                            00000007
OSCFIF                            00000007
OSCFIP                            00000007
OSCTUNE                           00000F9B
OSTS                              00000003
OV                                00000003
P                                 00000004
P1A                               00000002
P1B                               00000005
P1C                               00000006
P1D                               00000007
P1M0                              00000006
P1M1                              00000007
PC                                00000FF9
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000FF9
PCLATH                            00000FFA
PCLATU                            00000FFB
PD                                00000002
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEIE_GIEL                         00000006
PEN                               00000002
PGC                               00000006
PGD                               00000007
PGM                               00000005
PIE1                              00000F9D
PIE2                              00000FA0
PIR1                              00000F9E
PIR2                              00000FA1
PLLEN                             00000006
PLUSW0                            00000FEB
PLUSW1                            00000FE3
PLUSW2                            00000FDB
POR                               00000001
PORTA                             00000F80
PORTB                             00000F81
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

PORTC                             00000F82
PORTD                             00000F83
PORTE                             00000F84
POSA_DIR_0                        000006B2
POSA_VEL_N_H                      00000648
POSA_VEL_N_L                      00000658
POSA_VEL_N_M                      00000650
POSTDEC0                          00000FED
POSTDEC1                          00000FE5
POSTDEC2                          00000FDD
POSTINC0                          00000FEE
POSTINC1                          00000FE6
POSTINC2                          00000FDE
POS_INICIAL_SERVO                 00000708
PR2                               00000FCB
PREINC0                           00000FEC
PREINC1                           00000FE4
PREINC2                           00000FDC
PROD                              00000FF3
PRODH                             00000FF4
PRODL                             00000FF3
PRSEN                             00000007
PSA                               00000003
PSP0                              00000000
PSP1                              00000001
PSP2                              00000002
PSP3                              00000003
PSP4                              00000004
PSP5                              00000005
PSP6                              00000006
PSP7                              00000007
PSPIE                             00000007
PSPIF                             00000007
PSPIP                             00000007
PSPMODE                           00000004
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
PWM1CON                           00000FB7
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 33


SYMBOL TABLE
  LABEL                             VALUE 

RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RBIP                              00000000
RBPU                              00000007
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RCEN                              00000003
RCIDL                             00000006
RCIE                              00000005
RCIF                              00000005
RCIP                              00000005
RCMT                              00000006
RCON                              00000FD0
RCREG                             00000FAE
RCSTA                             00000FAB
RD                                00000000
RD0                               00000000
RD1                               00000001
RD16                              00000007
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
RECORD_MODE                       00000017
REPRODUIR_RUTA                    000005BE
RESET_TICS_ALARM                  0000003A
RESET_TICS_DELAY                  0000002C
RESET_TICS_MIN                    00000024
RESET_TICS_SEG                    00000032
RGB_BLUE                          000006C8
RGB_GREEN                         000006C0
RGB_RED                           000006B8
RGB_WHITE                         000006D0
RI                                00000004
RSEN                              00000001
RX                                00000007
RX9                               00000006
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 34


SYMBOL TABLE
  LABEL                             VALUE 

RX9D                              00000000
RXDTP                             00000005
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SAVE_PARAMS                       000001D0
SBOREN                            00000006
SCK                               00000003
SCKP                              00000004
SCL                               00000003
SCS0                              00000000
SCS1                              00000001
SDA                               00000004
SDI                               00000004
SDO                               00000005
SEN                               00000000
SENDB                             00000003
SMP                               00000007
SP0                               00000000
SP1                               00000001
SP2                               00000002
SP3                               00000003
SP4                               00000004
SPBRG                             00000FAF
SPBRGH                            00000FB0
SPEN                              00000007
SREN                              00000005
SSPADD                            00000FC8
SSPBUF                            00000FC9
SSPCON1                           00000FC6
SSPCON2                           00000FC5
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPIP                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000FC7
STATUS                            00000FD8
STKFUL                            00000007
STKOVF                            00000007
STKPTR                            00000FFC
STKUNF                            00000006
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
T016BIT                           00000006
T08BIT                            00000006
T0CKI                             00000004
T0CON                             00000FD5
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 35


SYMBOL TABLE
  LABEL                             VALUE 

T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0PS0                             00000000
T0PS1                             00000001
T0PS2                             00000002
T0SE                              00000004
T13CKI                            00000000
T1CKI                             00000000
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000FCD
T1OSCEN                           00000003
T1OSI                             00000001
T1OSO                             00000000
T1RUN                             00000006
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000FCA
T2OUTPS0                          00000003
T2OUTPS1                          00000004
T2OUTPS2                          00000005
T2OUTPS3                          00000006
T3CCP1                            00000003
T3CCP2                            00000006
T3CKPS0                           00000004
T3CKPS1                           00000005
T3CON                             00000FB1
T3SYNC                            00000002
TABLAT                            00000FF5
TAKE_DIRECTION                    00000422
TBLPTR                            00000FF6
TBLPTRH                           00000FF7
TBLPTRL                           00000FF6
TBLPTRU                           00000FF8
TIME_DELAY_H                      00000030
TIME_DELAY_L                      00000029
TMR0                              00000FD6
TMR0H                             00000FD7
TMR0IE                            00000005
TMR0IF                            00000002
TMR0IP                            00000002
TMR0L                             00000FD6
TMR0ON                            00000007
TMR1                              00000FCE
TMR1CS                            00000001
TMR1H                             00000FCF
TMR1IE                            00000000
TMR1IF                            00000000
TMR1IP                            00000000
TMR1L                             00000FCE
TMR1ON                            00000000
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 36


SYMBOL TABLE
  LABEL                             VALUE 

TMR2                              00000FCC
TMR2IE                            00000001
TMR2IF                            00000001
TMR2IP                            00000001
TMR2ON                            00000002
TMR3                              00000FB2
TMR3CS                            00000001
TMR3H                             00000FB3
TMR3IE                            00000001
TMR3IF                            00000001
TMR3IP                            00000001
TMR3L                             00000FB2
TMR3ON                            00000000
TO                                00000003
TOS                               00000FFD
TOSH                              00000FFE
TOSL                              00000FFD
TOSU                              00000FFF
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000F92
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000F93
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000F94
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000F95
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 37


SYMBOL TABLE
  LABEL                             VALUE 

TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000F96
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX                                00000006
TX9                               00000006
TX9D                              00000000
TXCKP                             00000004
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXIP                              00000004
TXREG                             00000FAD
TXSTA                             00000FAC
T_INICIAL                         00000710
T_PAS                             000006FE
T_PASSOS                          000000CC
T_REBOTS                          000006E0
Tics20                            00000018
TicsAlarmH                        00000013
TicsAlarmL                        00000012
TicsDelayH                        00000025
TicsDelayL                        00000024
TicsMinH                          00000009
TicsMinL                          00000010
TicsSegH                          00000016
TicsSegL                          00000015
UA                                00000001
UPDATE_SPEED                      0000014A
VCFG0                             00000004
VCFG1                             00000005
VDIRMAG                           00000007
VEL_0                             000003A2
VEL_ACTUAL                        00000006
VEL_N_HIGH                        00000336
VEL_N_LOW                         00000380
VEL_N_MID                         0000035E
VEL_P_HIGH                        00000402
VEL_P_LOW                         000003C2
VEL_P_MID                         000003E2
VPP                               00000003
VREFM                             00000002
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 38


SYMBOL TABLE
  LABEL                             VALUE 

VREFP                             00000003
W                                 00000000
WAIT_ADC                          000005B6
WAIT_GO_ADC                       000005B4
WCOL                              00000007
WDTCON                            00000FD1
WR                                00000001
WREG                              00000FE8
WREN                              00000002
WRERR                             00000003
WUE                               00000001
Z                                 00000002
_BBSIZ_BB1K_4L                    000000FF
_BBSIZ_BB256_4L                   000000CF
_BBSIZ_BB512_4L                   000000DF
_BORV_0_2L                        000000E7
_BORV_1_2L                        000000EF
_BORV_2_2L                        000000F7
_BORV_3_2L                        000000FF
_BOR_NOSLP_2L                     000000FD
_BOR_OFF_2L                       000000F9
_BOR_ON_2L                        000000FF
_BOR_SOFT_2L                      000000FB
_CCP2MX_RB3_3H                    000000FE
_CCP2MX_RC1_3H                    000000FF
_CONFIG1H                         00300001
_CONFIG2H                         00300003
_CONFIG2L                         00300002
_CONFIG3H                         00300005
_CONFIG4L                         00300006
_CONFIG5H                         00300009
_CONFIG5L                         00300008
_CONFIG6H                         0030000B
_CONFIG6L                         0030000A
_CONFIG7H                         0030000D
_CONFIG7L                         0030000C
_CP0_OFF_5L                       000000FF
_CP0_ON_5L                        000000FE
_CP1_OFF_5L                       000000FF
_CP1_ON_5L                        000000FD
_CPB_OFF_5H                       000000FF
_CPB_ON_5H                        000000BF
_CPD_OFF_5H                       000000FF
_CPD_ON_5H                        0000007F
_DEBUG_OFF_4L                     000000FF
_DEBUG_ON_4L                      0000007F
_DEVID1                           003FFFFE
_DEVID2                           003FFFFF
_EBTR0_OFF_7L                     000000FF
_EBTR0_ON_7L                      000000FE
_EBTR1_OFF_7L                     000000FF
_EBTR1_ON_7L                      000000FD
_EBTRB_OFF_7H                     000000FF
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 39


SYMBOL TABLE
  LABEL                             VALUE 

_EBTRB_ON_7H                      000000BF
_FCMEN_OFF_1H                     000000BF
_FCMEN_ON_1H                      000000FF
_IDLOC0                           00200000
_IDLOC1                           00200001
_IDLOC2                           00200002
_IDLOC3                           00200003
_IDLOC4                           00200004
_IDLOC5                           00200005
_IDLOC6                           00200006
_IDLOC7                           00200007
_IESO_OFF_1H                      0000007F
_IESO_ON_1H                       000000FF
_LPT1OSC_OFF_3H                   000000FB
_LPT1OSC_ON_3H                    000000FF
_LVP_OFF_4L                       000000FB
_LVP_ON_4L                        000000FF
_MCLRE_OFF_3H                     0000007F
_MCLRE_ON_3H                      000000FF
_OSC_ECIO_1H                      000000F5
_OSC_EC_1H                        000000F4
_OSC_HSPLL_1H                     000000F6
_OSC_HS_1H                        000000F2
_OSC_INTIO1_1H                    000000F9
_OSC_INTIO2_1H                    000000F8
_OSC_LP_1H                        000000F0
_OSC_RCIO_1H                      000000F7
_OSC_RC_1H                        000000F3
_OSC_XT_1H                        000000F1
_PBADEN_ANA_3H                    000000FF
_PBADEN_DIG_3H                    000000FD
_PWRT_OFF_2L                      000000FF
_PWRT_ON_2L                       000000FE
_STVREN_OFF_4L                    000000FE
_STVREN_ON_4L                     000000FF
_WDTPS_1024_2H                    000000F5
_WDTPS_128_2H                     000000EF
_WDTPS_16384_2H                   000000FD
_WDTPS_16_2H                      000000E9
_WDTPS_1_2H                       000000E1
_WDTPS_2048_2H                    000000F7
_WDTPS_256_2H                     000000F1
_WDTPS_2_2H                       000000E3
_WDTPS_32768_2H                   000000FF
_WDTPS_32_2H                      000000EB
_WDTPS_4096_2H                    000000F9
_WDTPS_4_2H                       000000E5
_WDTPS_512_2H                     000000F3
_WDTPS_64_2H                      000000ED
_WDTPS_8192_2H                    000000FB
_WDTPS_8_2H                       000000E7
_WDT_OFF_2H                       000000FE
_WDT_ON_2H                        000000FF
MPASM 5.86             NEWPIC_8B_GENERAL.ASM   2-23-2023  13:47:05         PAGE 40


SYMBOL TABLE
  LABEL                             VALUE 

_WRT0_OFF_6L                      000000FF
_WRT0_ON_6L                       000000FE
_WRT1_OFF_6L                      000000FF
_WRT1_ON_6L                       000000FD
_WRTB_OFF_6H                      000000FF
_WRTB_ON_6H                       000000BF
_WRTC_OFF_6H                      000000FF
_WRTC_ON_6H                       000000DF
_WRTD_OFF_6H                      000000FF
_WRTD_ON_6H                       0000007F
_XINST_OFF_4L                     000000BF
_XINST_ON_4L                      000000FF
__18F4321                         00000001

Errors   :     0
Warnings :    49 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

